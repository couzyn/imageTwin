{"ast":null,"code":"var _jsxFileName = \"/Users/carmencouzyn/Projects/image-twin/src/components/ImageEditor.jsx\";\nimport React, { useState, useRef, useLayoutEffect } from 'react';\nimport BBox from './BBox';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass ImageEditor extends React.Component {\n  constructor(_ref) {\n    let {\n      source,\n      index\n    } = _ref;\n    super({\n      source,\n      index\n    });\n    this.bBoxes = [];\n    this.formData = {\n      xPos: 0,\n      yPos: 0,\n      width: 0,\n      height: 0\n    };\n    this.message = \"\";\n    this.sizeHint = \"\";\n    this.imageRef = null;\n    this.setImageRef = element => {\n      this.imageRef = element;\n    };\n\n    // Dynamically syncs FormData with input values\n    this.handleChange = e => {\n      const updatedValue = {\n        [e.target.id]: e.target.value\n      };\n      setFormData(formData => ({\n        ...formData,\n        ...updatedValue\n      }));\n    };\n\n    // Adds a Box to the Array and Resets the Form\n    this.handleSumbit = e => {\n      e.preventDefault();\n      let xPos = 0;\n      let yPos = 0;\n      let width = 0;\n      let height = 0;\n\n      // Check if Integers\n      try {\n        xPos = parseInt(formData.xPos);\n        yPos = parseInt(formData.yPos);\n        width = parseInt(formData.width);\n        height = parseInt(formData.height);\n      } catch {\n        setMessage('Please enter valid numbers.');\n      }\n      const newBBox = {\n        xPos: xPos / imageRef.current.clientWidth * 100,\n        yPos: yPos / imageRef.current.clientHeight * 100,\n        width: width / imageRef.current.clientWidth * 100,\n        height: height / imageRef.current.clientHeight * 100\n      };\n      console.log();\n\n      // Check if > 0 \n\n      if (width <= 0 || height <= 0) {\n        setMessage('Please add a width and height');\n      }\n\n      // Check if within image bounds \n      else if (newBBox.xPos + newBBox.width > 100 || newBBox.yPos + newBBox.height > 100) {\n        setMessage('Your box overflows the image. Please draw a box that fits into ' + imageRef.current.clientWidth + 'px x ' + imageRef.current.clientHeight + 'px.');\n      } else {\n        bBoxes.push(newBBox);\n        console.log(\"new Box: \", newBBox);\n        setBBoxes(bBoxes);\n        setFormData({\n          xPos: 0,\n          yPos: 0,\n          width: 0,\n          height: 0\n        });\n        setMessage('Box added');\n      }\n    };\n  }\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      id: index,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"image-container\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          ref: this.setImageRef,\n          src: source,\n          alt: 'the uploaded image: ' + (index + 1)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 17\n        }, this), bBoxes.map((value, index) => {\n          return /*#__PURE__*/_jsxDEV(BBox, {\n            props: value\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 29\n          }, this);\n        }), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\" \", sizeHint, \" Image Size: \", imageRef.current.clientWidth, \"px x \", imageRef.current.clientHeight, \" px \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"editor\",\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"hint-message\",\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSumbit,\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"xPos\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \" X \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 116,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"xPos\",\n                value: formData.xPos,\n                onChange: handleChange,\n                placeholder: \"0\",\n                type: \"number\",\n                min: \"0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 115,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"yPos\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \" Y \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 120,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"yPos\",\n                value: formData.yPos,\n                onChange: handleChange,\n                placeholder: \"0\",\n                type: \"number\",\n                min: \"0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 121,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 114,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"input-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"width\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \" Width \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 126,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"width\",\n                value: formData.width,\n                onChange: handleChange,\n                placeholder: \"0\",\n                type: \"number\",\n                min: \"0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 127,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 25\n            }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"height\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                children: \" Height \"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 130,\n                columnNumber: 29\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                id: \"height\",\n                value: formData.height,\n                onChange: handleChange,\n                placeholder: \"0\",\n                type: \"number\",\n                min: \"0\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 131,\n                columnNumber: 29\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 129,\n              columnNumber: 25\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 21\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"submit\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 134,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 17\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 9\n    }, this);\n  }\n}\nexport default ImageEditor;","map":{"version":3,"names":["React","useState","useRef","useLayoutEffect","BBox","ImageEditor","Component","constructor","source","index","bBoxes","formData","xPos","yPos","width","height","message","sizeHint","imageRef","setImageRef","element","handleChange","e","updatedValue","target","id","value","setFormData","handleSumbit","preventDefault","parseInt","setMessage","newBBox","current","clientWidth","clientHeight","console","log","push","setBBoxes","render","map"],"sources":["/Users/carmencouzyn/Projects/image-twin/src/components/ImageEditor.jsx"],"sourcesContent":["import React, { useState, useRef, useLayoutEffect } from 'react'\nimport BBox from './BBox'\n\nclass ImageEditor extends React.Component {\n\n    constructor({ source, index }) {\n        super({ source, index });\n\n        this.bBoxes = []\n        this.formData = { xPos: 0, yPos: 0, width: 0, height: 0 }\n        this.message = \"\"\n        this.sizeHint = \"\"\n\n        this.imageRef = null\n\n\n        this.setImageRef = element => {\n            this.imageRef = element\n        }\n\n        // Dynamically syncs FormData with input values\n        this.handleChange = (e) => {\n            const updatedValue = { [e.target.id]: e.target.value }\n            setFormData(formData => ({\n                ...formData, ...updatedValue\n            }))\n        }\n\n\n\n\n        // Adds a Box to the Array and Resets the Form\n        this.handleSumbit = (e) => {\n            e.preventDefault()\n            let xPos = 0\n            let yPos = 0\n            let width = 0\n            let height = 0\n\n            // Check if Integers\n            try {\n                xPos = parseInt(formData.xPos)\n                yPos = parseInt(formData.yPos)\n                width = parseInt(formData.width)\n                height = parseInt(formData.height)\n            }\n            catch {\n                setMessage('Please enter valid numbers.')\n            }\n\n            const newBBox = {\n                xPos: (xPos / imageRef.current.clientWidth) * 100,\n                yPos: (yPos / imageRef.current.clientHeight) * 100,\n                width: (width / imageRef.current.clientWidth) * 100,\n                height: (height / imageRef.current.clientHeight) * 100\n            }\n\n            console.log()\n\n            // Check if > 0 \n\n\n            if (width <= 0 || height <= 0) {\n                setMessage('Please add a width and height')\n\n            }\n\n            // Check if within image bounds \n            else if (newBBox.xPos + newBBox.width > 100\n                || newBBox.yPos + newBBox.height > 100) {\n                setMessage('Your box overflows the image. Please draw a box that fits into ' + imageRef.current.clientWidth + 'px x ' + imageRef.current.clientHeight + 'px.')\n\n            }\n            else {\n                bBoxes.push(newBBox)\n                console.log(\"new Box: \", newBBox)\n                setBBoxes(bBoxes)\n                setFormData({ xPos: 0, yPos: 0, width: 0, height: 0 })\n                setMessage('Box added')\n            }\n\n        }\n\n\n\n    }\n\nrender() {\n    return (\n        <div id={index}>\n\n            { /* ----------- IMAGE AND BOXES ----------- */}\n\n            <div className=\"image-container\">\n                <img ref={this.setImageRef} src={source} alt={'the uploaded image: ' + (index + 1)} />\n                {\n                    bBoxes.map((value, index) => {\n                        return (\n                            <BBox key={index} props={value} />\n                        )\n                    })\n                }\n                <p> {sizeHint} Image Size: {imageRef.current.clientWidth}px x {imageRef.current.clientHeight} px </p>\n            </div>\n            <div className=\"editor\">\n\n\n\n                { /* ----------- FORM AREA ----------- */}\n\n                <p className=\"hint-message\">{message}</p>\n\n                <form onSubmit={handleSumbit}>\n                    <div className=\"input-group\">\n                        <label htmlFor=\"xPos\">\n                            <span> X </span>\n                            <input id=\"xPos\" value={formData.xPos} onChange={handleChange} placeholder=\"0\" type=\"number\" min=\"0\"></input>\n                        </label>\n                        <label htmlFor=\"yPos\">\n                            <span> Y </span>\n                            <input id=\"yPos\" value={formData.yPos} onChange={handleChange} placeholder=\"0\" type=\"number\" min=\"0\"></input>\n                        </label>\n                    </div>\n                    <div className=\"input-group\">\n                        <label htmlFor=\"width\">\n                            <span> Width </span>\n                            <input id=\"width\" value={formData.width} onChange={handleChange} placeholder=\"0\" type=\"number\" min=\"0\"></input>\n                        </label>\n                        <label htmlFor=\"height\">\n                            <span> Height </span>\n                            <input id=\"height\" value={formData.height} onChange={handleChange} placeholder=\"0\" type=\"number\" min=\"0\"></input>\n                        </label>\n                    </div>\n                    <input type=\"submit\" />\n                </form>\n                <div>\n                </div>\n            </div>\n        </div>\n    )\n}\n}\n\n\nexport default ImageEditor"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}