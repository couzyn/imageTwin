{"ast":null,"code":"import _toConsumableArray from\"/Users/carmencouzyn/Projects/imageTwin/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _defineProperty from\"/Users/carmencouzyn/Projects/imageTwin/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/carmencouzyn/Projects/imageTwin/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _classCallCheck from\"/Users/carmencouzyn/Projects/imageTwin/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"/Users/carmencouzyn/Projects/imageTwin/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _assertThisInitialized from\"/Users/carmencouzyn/Projects/imageTwin/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js\";import _inherits from\"/Users/carmencouzyn/Projects/imageTwin/node_modules/@babel/runtime/helpers/esm/inherits.js\";import _createSuper from\"/Users/carmencouzyn/Projects/imageTwin/node_modules/@babel/runtime/helpers/esm/createSuper.js\";import React from'react';import BBox from'./BBox';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ImageEditor=/*#__PURE__*/function(_React$Component){_inherits(ImageEditor,_React$Component);var _super=_createSuper(ImageEditor);/*\n    ------- IMAGE EDITOR CLASS ---------\n    * props: image object, index\n    */function ImageEditor(props){var _this;_classCallCheck(this,ImageEditor);_this=_super.call(this,props);_this.handleChange=function(e){if(e.target.value!==''){var targetValueInt='';try{targetValueInt=parseInt(e.target.value);}catch(_unused){console.error(\"non integers entered\");}_this.setState({formData:_objectSpread(_objectSpread({},_this.state.formData),{},_defineProperty({},e.target.id,targetValueInt))});}else{_this.setState({formData:_objectSpread(_objectSpread({},_this.state.formData),{},_defineProperty({},e.target.id,''))});}};_this.handleSumbit=function(e){e.preventDefault();var width=_this.state.formData.width;var height=_this.state.formData.height;var xPos=_this.state.formData.xPos;var yPos=_this.state.formData.yPos;var image=_this.props.image;// Check if box is > 0 \nif(width<=0||height<=0){var message='Please add a width and height';_this.setState({message:message});return;}// Check if box is within image bounds \nif(xPos+width>image.width||yPos+height>image.height){var _message='Your box overflows the image. Please draw a box that fits into '+image.width+'px x '+image.height+'px.';_this.setState({message:_message});return;}// Create new box with relative positioning for responsiveness\nvar newBBox={xPos:xPos/_this.props.image.width*100,yPos:yPos/_this.props.image.height*100,width:width/_this.props.image.width*100,height:height/_this.props.image.height*100};// Draw new Box and reset form\n_this.setState({bBoxes:[].concat(_toConsumableArray(_this.state.bBoxes),[newBBox]),formData:{xPos:'',yPos:'',width:'',height:''},message:'',focus:true});};_this.state={formData:{xPos:'',yPos:'',width:'',height:''},bBoxes:[],message:'',focus:false,image:{}};_this.handleChange=_this.handleChange.bind(_assertThisInitialized(_this));_this.handleSumbit=_this.handleSumbit.bind(_assertThisInitialized(_this));return _this;}// Syncs FormData store with input values\n_createClass(ImageEditor,[{key:\"componentDidMount\",value:/* This dirty fixes a weird rendering race condition,\n    where the image dimensions are loaded a second after mounting\n    and are not updated -- if this was a real project, I'd look into\n    properly fixing this */function componentDidMount(){var _this2=this;setTimeout(function(){_this2.setState({image:_this2.props.image});},100);}},{key:\"render\",value:function render(){return/*#__PURE__*/_jsxs(\"div\",{className:\"editor\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"image-container\",children:[/*#__PURE__*/_jsx(\"img\",{className:this.state.focus?'--focus':'',src:this.props.image.src,alt:'the uploaded image: '+(this.props.index+1)}),this.state.bBoxes.map(function(value,index){return/*#__PURE__*/_jsx(BBox,{props:value},index);})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"dimensions\",children:[\"Image Dimensions: \",this.props.image.width,\" x \",this.props.image.height]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"form\",{className:\"b-box-form\",onSubmit:this.handleSumbit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"xPos\",children:[/*#__PURE__*/_jsx(\"span\",{children:\" X Position \"}),/*#__PURE__*/_jsx(\"input\",{id:\"xPos\",value:this.state.formData.xPos,onChange:this.handleChange,placeholder:\"enter x\",type:\"number\",min:\"0\"})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"yPos\",children:[/*#__PURE__*/_jsx(\"span\",{children:\" Y Position \"}),/*#__PURE__*/_jsx(\"input\",{id:\"yPos\",value:this.state.formData.yPos,onChange:this.handleChange,placeholder:\"enter y\",type:\"number\",min:\"0\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"width\",children:[/*#__PURE__*/_jsx(\"span\",{children:\" Width \"}),/*#__PURE__*/_jsx(\"input\",{id:\"width\",value:this.state.formData.width,onChange:this.handleChange,placeholder:\"enter width\",type:\"number\",min:\"0\"})]}),/*#__PURE__*/_jsxs(\"label\",{htmlFor:\"height\",children:[/*#__PURE__*/_jsx(\"span\",{children:\" Height \"}),/*#__PURE__*/_jsx(\"input\",{id:\"height\",value:this.state.formData.height,onChange:this.handleChange,placeholder:\"enter height\",type:\"number\",min:\"0\"})]})]}),/*#__PURE__*/_jsx(\"p\",{className:\"hint-message\",children:this.state.message}),/*#__PURE__*/_jsx(\"input\",{className:\"add-box-btn\",type:\"submit\",value:\"Draw B-Box\"})]}),/*#__PURE__*/_jsx(\"div\",{})]})]});}}]);return ImageEditor;}(React.Component);export default ImageEditor;","map":{"version":3,"names":["React","BBox","ImageEditor","props","handleChange","e","target","value","targetValueInt","parseInt","console","error","setState","formData","state","id","handleSumbit","preventDefault","width","height","xPos","yPos","image","message","newBBox","bBoxes","focus","bind","setTimeout","src","index","map","Component"],"sources":["/Users/carmencouzyn/Projects/imageTwin/src/components/ImageEditor.jsx"],"sourcesContent":["import React from 'react'\nimport BBox from './BBox'\n\nclass ImageEditor extends React.Component {\n\n\n    /*\n    ------- IMAGE EDITOR CLASS ---------\n    * props: image object, index\n    */\n    constructor(props) {\n        super(props)\n\n        this.state = {\n            formData: { xPos: '', yPos: '', width: '', height: '' },\n            bBoxes: [],\n            message: '',\n            focus: false,\n            image: {}\n        }\n\n        this.handleChange = this.handleChange.bind(this)\n        this.handleSumbit = this.handleSumbit.bind(this)\n    }\n\n\n    // Syncs FormData store with input values\n    handleChange = (e) => {\n        if (e.target.value !== '') {\n            let targetValueInt = ''\n            try {\n                targetValueInt = parseInt(e.target.value)\n            }\n            catch {\n                console.error(\"non integers entered\")\n            }\n            this.setState({ formData: { ...this.state.formData, [e.target.id]: targetValueInt } })\n        }\n        else {\n            this.setState({ formData: { ...this.state.formData, [e.target.id]: '' } })\n        }\n\n    }\n\n    // Adds a BBox to the store and resets the Form\n    handleSumbit = (e) => {\n        e.preventDefault()\n\n        const width = this.state.formData.width\n        const height = this.state.formData.height\n        const xPos = this.state.formData.xPos\n        const yPos = this.state.formData.yPos\n\n        const image = this.props.image\n\n        // Check if box is > 0 \n        if (width <= 0 || height <= 0) {\n            const message = 'Please add a width and height'\n            this.setState({ message: message })\n            return\n        }\n\n        // Check if box is within image bounds \n        if (xPos + width > image.width\n            || yPos + height > image.height) {\n            const message = 'Your box overflows the image. Please draw a box that fits into ' + image.width + 'px x ' + image.height + 'px.'\n            this.setState({ message: message })\n            return\n        }\n\n        // Create new box with relative positioning for responsiveness\n        const newBBox = {\n            xPos: (xPos / this.props.image.width) * 100,\n            yPos: (yPos / this.props.image.height) * 100,\n            width: (width / this.props.image.width) * 100,\n            height: (height / this.props.image.height) * 100\n        }\n\n        // Draw new Box and reset form\n        this.setState({\n            bBoxes: [...this.state.bBoxes, newBBox],\n            formData: { xPos: '', yPos: '', width: '', height: '' },\n            message: '',\n            focus: true\n        })\n\n    }\n\n\n    /* This dirty fixes a weird rendering race condition,\n    where the image dimensions are loaded a second after mounting\n    and are not updated -- if this was a real project, I'd look into\n    properly fixing this */\n    componentDidMount() {\n        setTimeout(() => {\n            this.setState({\n                image: this.props.image\n            })\n        }, 100)\n    }\n\n\n    render() {\n        return (\n            <div className=\"editor\">\n\n                { /* ----------- IMAGE AND BBOXES ----------- */}\n                <div className=\"image-container\">\n                    <img className={this.state.focus ? '--focus' : ''} src={this.props.image.src} alt={'the uploaded image: ' + (this.props.index + 1)} />\n                    {\n                        this.state.bBoxes.map((value, index) => {\n                            return (\n                                <BBox key={index} props={value} />\n                            )\n                        })\n                    }\n                </div>\n\n                { /* ----------- DIMENSIONS HINT ----------- */}\n                <p className=\"dimensions\">\n                    Image Dimensions: {this.props.image.width} x {this.props.image.height}\n                </p>\n\n                <div>\n\n\n                    { /* ----------- BBOX INPUT AREA ----------- */}\n                    <form className=\"b-box-form\" onSubmit={this.handleSumbit}>\n                        <div className=\"input-group\">\n                            <label htmlFor=\"xPos\">\n                                <span> X Position </span>\n                                <input id=\"xPos\" value={this.state.formData.xPos} onChange={this.handleChange} placeholder=\"enter x\" type=\"number\" min=\"0\"></input>\n                            </label>\n                            <label htmlFor=\"yPos\">\n                                <span> Y Position </span>\n                                <input id=\"yPos\" value={this.state.formData.yPos} onChange={this.handleChange} placeholder=\"enter y\" type=\"number\" min=\"0\"></input>\n                            </label>\n                        </div>\n                        <div className=\"input-group\">\n                            <label htmlFor=\"width\">\n                                <span> Width </span>\n                                <input id=\"width\" value={this.state.formData.width} onChange={this.handleChange} placeholder=\"enter width\" type=\"number\" min=\"0\"></input>\n                            </label>\n                            <label htmlFor=\"height\">\n                                <span> Height </span>\n                                <input id=\"height\" value={this.state.formData.height} onChange={this.handleChange} placeholder=\"enter height\" type=\"number\" min=\"0\"></input>\n                            </label>\n                        </div>\n\n                        { /* ----------- ERROR MESSAGE ----------- */}\n                        <p className=\"hint-message\">{this.state.message}</p>\n\n                        { /* ----------- SUBMIT ----------- */}\n                        <input className=\"add-box-btn\" type=\"submit\" value=\"Draw B-Box\" />\n                    </form>\n                    <div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\n\nexport default ImageEditor"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}